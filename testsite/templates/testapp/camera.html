{% extends "testapp/dashboard.html" %}
{% load static %}

{% block title %}
<title>Classroom HQ | FRAS</title>
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'testapp/css/student.css' %}">
{% endblock %}
{% block body %}
<div class="main-container">
  <div class="main-part1">
    <div class="part1-content">
      <select name="department" id="" disabled>
        <option value="cse">Computer Science and Engineering</option>
      </select>
    </div>

    <div class="part1-content">
      <button class="custom-file-upload" onclick="addclass()">Assign Classroom</button>
    </div>

    <div class="part1-content">
      <button class="custom-file-upload" onclick="addcam()">Add Camera</button>
    </div>
  </div>
  <div class="main-part2">
    <div class="btn-cont" style="justify-content: center;">
      <div class="tabletitle">
        <h1>
          Camera Details
        </h1>
      </div>
    </div>
    <div class="part2-content">
      <table>
        <thead>
          <tr>
            <th class="ctcol2">Class</th>
            <th class="ctcol1">Room No.</th>
            <th class="ctcol3">Camera IP</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Second Year</td>
            <td>101</td>
            <td>120.45.65.2</td>
          </tr>
          <tr>
            <td>Third Year</td>
            <td>202</td>
            <td>120.45.65.3</td>
          </tr>
          <tr>
            <td>Final Year</td>
            <td>303</td>
            <td>120.45.65.4</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div id="myModal4" class="modal4">
  <div class="modal-content4" id="content4">
    <div class="popup4">
      <span class="close4" id="cbtn4">&times;</span>
      <div class="popup_title4">
        Provide Camera Details
      </div>
      <div class="popup_body4">
        <form class="popup_form2" action="#">

          <!-- <div class="in_div">
            <label for="class" class="input_label">Class</label>
            <input type="text" id="class" name="room_no" class="in_field" required>
          </div> -->

          <div class="in_div">
            <label for="room" class="input_label">Room No.</label>
            <input type="text" id="room" name="room_no" class="in_field" required>
          </div>
          <div class="in_div">
            <label for="ip" class="input_label">Camera IP</label>
            {% comment %} <input type="text" id="ip" name="password" class="in_field" required> {% endcomment %}
            <select name="camera_num" id="ip" class="in_field">
              <option value="default">100</option>
            </select>

          </div>

          <input type="submit" value="Add" class="register_btn">
        </form>
      </div>
    </div>
  </div>
</div>

<div id="myModal5" class="modal4">
  <div class="modal-content4" id="content5">
    <div class="popup4">
      <span class="close4" id="cbtn5">&times;</span>
      <div class="popup_title4">
        Provide Classroom Details
      </div>
      <div class="popup_body4">
        <form class="popup_form2" action="#">

          <div class="in_div">
            <label for="class" class="input_label">Class</label>
            <input type="text" id="class" name="room_no" class="in_field" required>
          </div>

          <div class="in_div">
            <label for="room" class="input_label">Room No.</label>
            <input type="text" id="room" name="room_no" class="in_field" required>
          </div>
          
          <input type="submit" value="Assign" class="register_btn">
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function addcam() {
    document.getElementById("myModal4").style.display = "block";
    navigator.mediaDevices.enumerateDevices().then(devices => {
      let cameras = devices.filter(device => device.kind === 'videoinput');  
      console.log(cameras)
      const selector = document.querySelector("#ip");
      for (let i = 101; i < cameras.length+100; i++) {
        const option = document.createElement('option');
        option.value = `${i}`;
        option.text = `${i}`;
        selector.appendChild(option);
      }
    });

  }
  function closeModal4() {
    document.getElementById("myModal4").style.display = "none";
  }
  function addclass() {
    document.getElementById("myModal5").style.display = "block";
  }
  function closeModal5() {
    document.getElementById("myModal5").style.display = "none";
  }
  window.onclick = function (event) {
    if (
      event.target == document.getElementById("cbtn4") ||
      event.target == document.getElementById("content4")
    ) {
      closeModal4();
      const selector = document.querySelector("#ip");
      while (selector.options.length > 1) {
        selector.remove(1);
      }
    } else if(
      event.target == document.getElementById("cbtn5") ||
      event.target == document.getElementById("content5")
    ){
      closeModal5();
    }
  };
</script>

{% endblock %}